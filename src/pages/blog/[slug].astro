---
import Layout from '../../layouts/Layout.astro';
import type { CollectionEntry } from 'astro:content';
import { getCollection } from 'astro:content';

export async function getStaticPaths() {
	const posts = await getCollection('blog');
	return posts.map((post) => ({
		params: { slug: post.slug },
		props: { post },
	}));
}

const { post } = Astro.props as { post: CollectionEntry<'blog'> };
const { Content } = await post.render();
---

<Layout title={`${post.data.title} | Galaxy Insights`} description={post.data.description}>
	<article class="mx-auto max-w-3xl px-6 py-16">
		<a href="/blog" class="text-sm text-[#2ef2de]">‚Üê Back to blog</a>
		<p class="mt-6 text-xs uppercase tracking-[0.4em] text-slate-400">
			{post.data.publishDate.toLocaleDateString('en-US', { month: 'short', day: 'numeric', year: 'numeric' })}
		</p>
		<h1 class="mt-3 text-4xl font-semibold text-white">{post.data.title}</h1>
		<p class="mt-2 text-lg text-slate-300">{post.data.description}</p>
		{post.data.heroImage && (
			<img src={post.data.heroImage.src} alt={post.data.heroImage.alt} class="mt-10 rounded-3xl border border-white/10" />
		)}
		<div class="prose prose-invert mt-10 max-w-none text-lg leading-relaxed">
			<Content />
		</div>
	</article>
</Layout>
